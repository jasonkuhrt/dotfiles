{"id":"dotfiles-1gd","title":"Set up packages/linear with Graffle client for Linear API","description":"Create packages/linear/ in the Bun workspace. Add package.json (@jasonkuhrt/linear), tsconfig. Run graffle CLI to generate typed client from Linear's GraphQL schema (https://api.linear.app/graphql). Create src/client.ts that exports a configured Graffle client using LINEAR_API_TOKEN from env. Verify generation works and client can make a basic query.","status":"closed","priority":1,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:15.899328-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T00:56:48.576121-05:00","closed_at":"2026-01-28T00:56:48.576121-05:00","close_reason":"packages/linear created with Graffle-generated typed client and configured client.ts"}
{"id":"dotfiles-36y","title":"Apply gh_ namespace to gh-* and merge pr-* under gh_","description":"Rename all gh-* skill directories and merge pr-* skills under the gh_ namespace.\n\ngh-* skills (dir rename + frontmatter update):\n- gh-cli → gh_cli (gh:cli)\n- gh-ci-action-ts → gh_ci-action-ts (gh:ci-action-ts)\n- gh-issue-read → gh_issue-read (gh:issue-read)\n- gh-pr-comment-write → gh_pr-comment-write (gh:pr-comment-write)\n\npr-* → gh_ (namespace change + dir rename):\n- pr-ai-reviewers → gh_pr-ai-reviewers (gh:pr-ai-reviewers)\n- pr-checks → gh_pr-checks (gh:pr-checks)\n- pr-resolve-review → gh_pr-resolve-review (gh:pr-resolve-review)\n- pr-test-resolve-review → gh_pr-test-resolve-review (gh:pr-test-resolve-review)\n\nFor each skill:\n1. Rename directory\n2. Update frontmatter name to use colon\n3. Grep for old name references in other skills/rules and update them","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T22:26:16.056747-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T22:48:57.226857-05:00","closed_at":"2026-01-27T22:48:57.226857-05:00","close_reason":"Closed","dependencies":[{"issue_id":"dotfiles-36y","depends_on_id":"dotfiles-c8z","type":"blocks","created_at":"2026-01-27T22:26:28.040287-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-4u0","title":"Consolidate cc_* user skills into 3 router skills","description":"Merge 15 cc_* skills into 3 routers:\n- cc_authoring: writing-skills, writing-hooks, writing-rules, markers, ask-user-question, skills-tmp-dir\n- cc_ecosystem: managing-plugins, managing-mcp, managing-permissions, managing-marketplaces  \n- cc_core: internals, tasks, session-search, session-get-id, chrome-debugging, fork\n\ncc_writing-skills already has progressive disclosure (12 files). Its SKILL.md body becomes reference/writing-skills/overview.md, its reference/ files move to reference/writing-skills/.\n\nRegistry savings: ~12 entries (~550 tokens). Largest single cluster savings.","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:12.713544-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:12.713544-05:00"}
{"id":"dotfiles-51h","title":"Consolidate research_* user skills into single router skill","description":"Merge 4 research_* skills (write, prune, format, flush-cc-thread) into single research router skill. All are single-file SKILL.md skills — straightforward merge. Each becomes a section in the router or a reference file.\n\nRegistry savings: ~3 entries (~140 tokens).","status":"open","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:17.407058-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:17.407058-05:00"}
{"id":"dotfiles-54h","title":"QA refactor pass: lint, type checks, CI hooks, and code quality for shan","description":"## Summary\n\nComprehensive quality pass on `packages/shan/` to establish a proper check pipeline, eliminate duplication, and wire checks into CC's workflow for automated enforcement.\n\n## Context\n\nShan has grown from a single transcript dump command to a multi-namespace CLI (transcript + task) with 11 source files and no automated quality checks. Several patterns were copied-then-modified during feature work, creating duplicated logic and inconsistent approaches.\n\n## Deliverables\n\n### 1. Check Scripts in package.json\n\nAdd scripts to `packages/shan/package.json`:\n\n- `typecheck` — `tsc --noEmit`\n- `lint` — biome or dprint (match dotfiles conventions)\n- `check` — runs all checks (typecheck + lint)\n\n### 2. CC Integration Hooks\n\nWire checks into Claude Code's workflow so they run automatically when working on shan:\n\n- Add `packages/shan/.claude/settings.json` (or project-level hooks) with PreCommit or PostToolUse hooks that run `bun run check` on relevant file changes\n- Consider a `.claude/rules/` file scoping shan-specific conventions (Effect patterns, Bun APIs, etc.)\n\n### 3. Deduplicate Shared Logic\n\nSeveral modules duplicate core concepts:\n\n- **Project directory encoding** — `toClaudeProjectDir` in `session-picker.ts` and inline `cwd.replace(/[/.]/g, \"-\")` in `task-resolver.ts`. Extract to a shared `claude-paths.ts` module.\n- **Current session ID** — `getCurrentSessionId()` exists in both `session-resolver.ts` and `task-resolver.ts` with identical implementations. Extract to shared module.\n- **Session discovery for project scoping** — `discoverSessions()` in `session-picker.ts` and `getProjectSessionIds()` in `task-resolver.ts` both scan `~/.claude/projects/\u003cdir\u003e/` with different return types. Unify the underlying scan logic.\n\n### 4. Consistent Effect Patterns\n\n- Some helpers use raw `async/await` (`discoverSessions`, `loadTasks`, `findSessionFile`) while command-level code uses `Effect.gen`. Decide on the boundary: raw async for pure I/O helpers is fine, but document the convention.\n- Error handling mixes `try/catch` (in async helpers) with `Effect.fail` (in generators). This is acceptable but should be explicit/documented.\n\n### 5. Type Safety Cleanup\n\n- `task-picker.ts` has an `as any` cast for Clack's `select` options due to `exactOptionalPropertyTypes` strictness. Investigate if there's a cleaner workaround (Clack type augmentation or explicit option type).\n- `transcript/dump.ts` uses `as` casts for entry type narrowing (lines 37, 66-67, 71). Could use proper Schema refinements.\n\n### 6. Package Exports\n\n`package.json` exports only `./transcript-schema`. Consider adding:\n- `./task-schema` — for external consumers of task types\n- Or decide exports aren't needed and document that decision\n\n### 7. Formatter Setup\n\nNo formatter is configured. Add dprint or biome config consistent with the broader dotfiles repo. Check if the root repo already has a formatter config that should be extended.\n\n## Key Patterns to Preserve\n\n- Effect monad for all command-level composition and error handling\n- `@clack/prompts` for interactive TUI\n- Bun-native APIs (Glob, Bun.file, Bun.spawn)\n- `#!/usr/bin/env bun` shebang for direct TS execution\n- KNUTH LITERAL style (public API first, helpers last)\n\n## Out of Scope\n\n- Tests (separate issue — shan is a CLI tool where manual testing is primary)\n- New features","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T16:31:34.700669-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T16:31:34.700669-05:00"}
{"id":"dotfiles-5cr","title":"Linear skill: replace MCPs with user-level skill + Bun TS scripts","description":"Replace all Linear MCP integrations and fragmented project-level skills with a single user-level skill backed by Bun TS scripts calling Linear's GraphQL API directly.\n\n## Context\n\nAudit found 3 problems:\n1. Two Linear MCPs configured in HB (StreamLinear + official plugin) — competing, confusing\n2. Three HB-level skills for one service (managing-linear-issues, current-linear-issue, uploading-to-linear) — fragmented\n3. Project-specific data (team members, UUIDs) hardcoded in skill prose instead of config\n\nStreamLinear's entire value is ~550 lines wrapping `fetch` to one GraphQL endpoint. No need for an MCP process, npx cold-start, or external dependency. Bun TS scripts do the same thing with zero deps.\n\nOfficial Linear MCP is closed-source, no public repo, no visible roadmap. Dead end.\n\n## Scope\n\nSpans dotfiles repo + all HB checkouts/worktrees (one-time migration).\n\n## Deliverables\n\n### 1. Create user-level skill (`~/.claude/skills/linear/`)\n\n- `SKILL.md` — unified skill with progressive disclosure\n  - Workflows: mention syntax (URL not @username), search-before-create, upload-then-embed\n  - Issue context resolution (branch → context file → search → ask)\n  - Reads project-level config for workspace-specific data\n  - References scripts for operations\n- Scripts (`scripts/`):\n  - `_linear.ts` — shared core: GraphQL fetch wrapper, ID resolution, state matching, formatters (rip from StreamLinear's linear-core.ts)\n  - `linear-search.ts` — search issues\n  - `linear-get.ts` — get issue details\n  - `linear-create.ts` — create issue\n  - `linear-comment.ts` — post comment\n  - `linear-fetch.ts` — download issue + attachments (HTTP binary, not GraphQL)\n  - `linear-upload.ts` — upload file for embed URL (HTTP binary)\n  - `linear-attach.ts` — upload file as issue attachment (HTTP binary)\n  - Or: consolidate CRUD into one `linear.ts \u003caction\u003e` entry point, keep file ops separate\n\n### 2. Design credential resolution\n\nOptions to spec out:\n- `LINEAR_API_TOKEN` env var (current, works)\n- `.env` file loading in scripts\n- `--token-cmd` pattern for 1Password / secrets managers\n- Should the skill document all three? Which is default?\n\n### 3. Design project-level config\n\n- `.claude/linear.yaml` — workspace slug, teams (name → UUID), members (name, displayName, UUID, role)\n- Checked into git (shared team knowledge) vs gitignored vs checked-in + .local override\n- Skill reads this at invocation time\n\n### 4. Remove from HB (all checkouts/worktrees)\n\n- Delete `.mcp.json` `linear` entry (StreamLinear)\n- Remove official Linear plugin from marketplace config\n- Clean `settings.json` / `settings.local.json` / `settings.local.json.example` — remove `mcp__linear`, `mcp__linear__linear` permissions\n- Delete `managing-linear-issues/` skill\n- Delete `current-linear-issue/` skill\n- Delete `uploading-to-linear/` skill\n- Create `.claude/linear.yaml` with HB's team data\n- Update CLAUDE.md reference from `managing-linear-issues` skill to `linear` skill\n\n## Design Decisions to Make\n\n1. Script granularity: one `linear.ts \u003caction\u003e` entry point vs multiple scripts vs shared core + thin entry points\n2. Config format: YAML vs JSON vs TOML\n3. Config git policy: checked in vs gitignored vs split\n4. Credential resolution: env var only vs multi-source\n5. Progressive disclosure: what goes in SKILL.md vs what Claude discovers via `help` action in scripts\n\n## References\n\n- StreamLinear source: /tmp/streamlinear/ (cloned for review)\n- StreamLinear repo: https://github.com/obra/streamlinear\n- Linear GraphQL API: https://api.linear.app/graphql\n- HB skills being replaced: .claude/skills/managing-linear-issues/, current-linear-issue/, uploading-to-linear/\n- Research conversation: this session (464610cc-f14e-421e-b211-aeea38dbc7af)","notes":"## Design Decisions (session ce759bf7)\n\n### Resolved\n1. **Script granularity** → Graffle package (packages/linear/) + thin upload/download helpers. No individual CLI scripts — skills use Graffle client directly.\n2. **Config format** → YAML (.claude/linear.yaml)\n3. **Config git policy** → Checked in + .local override (.claude/linear.local.yaml gitignored)\n4. **Credential resolution** → Env var only (LINEAR_API_TOKEN), document 1Password/direnv alternatives in skill\n5. **Progressive disclosure** → Thin SKILL.md + reference/ files for detailed docs\n\n### Architecture\n- packages/linear/ — Graffle-generated GraphQL client + file upload/download helpers\n- 4 skills in linear_* namespace: core, managing-issues, current-issue, uploading\n- Skills = workflow knowledge; package = typed API access\n- Graffle CLI generates typed client from Linear GraphQL schema introspection","status":"closed","priority":1,"issue_type":"feature","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T18:36:07.889764-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:08:05.964524-05:00","closed_at":"2026-01-28T01:08:05.964524-05:00","close_reason":"All 7 child beads completed: Graffle client, 4 linear_* skills, upload/download helpers, HB migration","dependencies":[{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-1gd","type":"blocks","created_at":"2026-01-28T00:32:01.894572-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-ret","type":"blocks","created_at":"2026-01-28T00:32:01.973216-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-dqa","type":"blocks","created_at":"2026-01-28T00:32:02.042937-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-h9m","type":"blocks","created_at":"2026-01-28T00:32:02.10921-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-ern","type":"blocks","created_at":"2026-01-28T00:32:02.183419-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-le0","type":"blocks","created_at":"2026-01-28T00:32:02.250878-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-5cr","depends_on_id":"dotfiles-fn1","type":"blocks","created_at":"2026-01-28T00:32:02.321405-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-6lb","title":"Create gh_actions skill with GitHub Actions conventions","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T13:41:49.536106-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T13:44:09.642626-05:00","closed_at":"2026-01-28T13:44:09.642626-05:00","close_reason":"Created gh_actions skill at claude/skills/gh_actions/SKILL.md with naming conventions, log group rules, and job summary guidelines. Tested with subagent baseline comparison."}
{"id":"dotfiles-7nv","title":"Consolidate git_* user skills into 1-2 router skills","description":"Merge 5 git_* skills (sync, worktree, commit, mode-control, parallel-commit) into 1-2 routers.\n\ngit_sync has heavy progressive disclosure (14 files: scripts/, schemas/, templates/, reference/). It becomes the primary topic. Simpler skills (commit, mode-control, parallel-commit) become reference files.\n\nConsider: git_sync may be complex enough to remain standalone. If so, merge only commit + mode-control + parallel-commit into git_commit.\n\nRegistry savings: ~3-4 entries (~140-180 tokens).","status":"open","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:16.66238-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:16.66238-05:00"}
{"id":"dotfiles-7qk","title":"Fix git mode-control state persistence bug","description":"When user selects 'commit (enter mode)' in git mode-control, the mode is not persisted. Next commit attempt re-prompts. Root cause: skill instructions in step 3 say 'write to file' but are not explicit enough for Claude to actually mkdir + Write the .clauding/git_mode-control/git-mode.yaml file. The .clauding/ directory doesn't even exist.","status":"closed","priority":2,"issue_type":"bug","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:22:20.594963-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:22:57.446394-05:00","closed_at":"2026-01-28T14:22:57.446394-05:00","close_reason":"Made skill step 3 explicit: mkdir + Write tool with concrete path .clauding/git_mode-control/git-mode.yaml. Also added .clauding/ to .gitignore (was missing)."}
{"id":"dotfiles-7st","title":"Add stdin support to linear_gql query.ts for shell escaping","description":"## Context\n\nGraphQL queries with `String\\!` (non-null types) get mangled by bash due to history expansion on `\\!`.\n\nCurrent workaround requires awkward escaping with double quotes and escaped dollar signs.\n\n## Design\n\nAdd `--stdin` flag to read query from stdin, sidestepping shell interpretation:\n\n```bash\necho 'mutation($id: String\\!) { issueDelete(id: $id) { success } }' | bun query.ts --stdin -v '{\"id\": \"...\"}'\n```\n\nOr with heredoc for multiline queries.\n\n## Tasks\n\n1. Add `--stdin` flag to `query.ts`\n2. When `--stdin` is set, read query from stdin instead of positional arg\n3. Update help text with stdin examples\n4. Update `linear_gql/SKILL.md` to document stdin usage for mutations","status":"closed","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T11:34:24.782271-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T11:42:46.545528-05:00","closed_at":"2026-01-28T11:42:46.545528-05:00","close_reason":"Closed"}
{"id":"dotfiles-c02","title":"Add linear_workspace-pull skill for cached workspace settings","description":"## Context\n\nLinear skills currently guess or fail on workspace-specific data (state names, user lookups). Skills must NEVER invent this data - they must operate from a downloaded, cached copy of workspace settings.\n\n## Design\n\n### Cache location\n\nPer `cc_skills-tmp-dir` convention:\n```\n.claude/tmp/linear/workspace.yaml   # READ-ONLY, pulled from Linear API\n```\n\n### Cache contents\n\n```yaml\nworkspace: heartbeat-chat\nteams:\n  - id: uuid\n    key: HEA\n    name: Engineering\n    states:\n      - id: uuid\n        name: \"In Dev\"\n        type: started\n        position: 1\n      # ...\n    labels:\n      - id: uuid\n        name: bug\n      # ...\nusers:\n  - id: uuid\n    name: \"Jason Kuhrt\"\n    displayName: jason\n    email: jason@example.com\n  # ...\npulledAt: 2026-01-28T12:00:00Z\n```\n\n### New skill: `linear_workspace-pull`\n\n- Single entry point for initialization AND refresh\n- Downloads teams, states, users, labels from Linear API\n- Writes to `.claude/tmp/linear/workspace.yaml`\n- Idempotent - safe to run multiple times\n\n### Skill dependency flow\n\n1. Any linear skill needs workspace data\n2. Check for `.claude/tmp/linear/workspace.yaml`\n3. If missing → invoke `linear_workspace-pull` → wait → continue\n4. Use cached data for validation/mapping\n\n### Human name → mention mapping\n\nWhen writing content (descriptions, comments) with human names:\n1. Look up name in cached `users` list\n2. **Match found** → convert to `https://linear.app/{workspace}/profiles/{displayName}`\n3. **No match** → keep as plaintext + notify user:\n   ```\n   ⚠️ Could not match \"Bob Smith\" to a Linear workspace member. Left as plaintext.\n   ```\n\n## Tasks\n\n1. Create `linear_workspace-pull` skill with `scripts/pull.ts`\n2. Update `linear_core` SKILL.md to document cache location and dependency\n3. Update `linear_managing-issues` scripts to check for cache before operations\n4. Update `linear_managing-issues/scripts/update.ts` to validate state against cache\n5. Update `linear_managing-issues/scripts/comment.ts` to map human names to mentions\n6. Update `linear_managing-issues/scripts/create.ts` to map human names to mentions","status":"closed","priority":2,"issue_type":"feature","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T11:34:17.421356-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T11:42:46.567738-05:00","closed_at":"2026-01-28T11:42:46.567738-05:00","close_reason":"Closed"}
{"id":"dotfiles-c0c","title":"Hello world","status":"tombstone","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T12:01:47.501363-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T12:02:20.490547-05:00","deleted_at":"2026-01-27T12:02:20.490547-05:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"dotfiles-c8z","title":"Document namespace convention in cc-writing-skills","description":"Add a new section to cc-writing-skills/SKILL.md documenting the colon-namespace convention for skill names:\n\n- Directory name: use underscores as namespace delimiters (e.g. cc_internals, gh_pr-checks)\n- Frontmatter name: use colons instead of underscores (e.g. cc:internals, gh:pr-checks)\n- Hyphens remain as word separators within segments\n- Use this technique when there are multiple related skills that shouldn't all be crammed into one giant multi-operation skill\n- Update the 'Naming' line in File Structure section to reflect this\n- Update Facts section about how dir name maps to Skill() log output","status":"closed","priority":1,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T22:25:56.146008-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T22:33:16.815382-05:00","closed_at":"2026-01-27T22:33:16.815382-05:00","close_reason":"Added Namespacing section to cc-writing-skills/SKILL.md documenting underscore/colon convention, updated Naming line and Facts section"}
{"id":"dotfiles-do0","title":"Fix research-write skill: too easily confused with issue/spec creation","description":"## Bug\n\nClaude used research-write skill when asked to create a bead spec. The user said \"flushed out spec of things to do in a new dotfiles bead\" and Claude reached for research-write instead of beads.\n\n## Root Cause\n\nThe research-* skills (research-write, research-format, research-prune, research-flush-cc-thread) don't clearly delineate their boundary. \"Write a spec\" pattern-matches to \"research-write\" because it involves writing a document. But research files are for storing findings, not driving work.\n\n## Symptoms\n\n- Claude created a research file (.claude/research/2026-01-27-2333-linear-skill-migration-spec.md) when it should have created a bead\n- The research-write skill's description doesn't explicitly say what it's NOT for\n- No guardrail distinguishing \"store findings\" from \"track work\"\n\n## Fix\n\nAudit and update research-* skill descriptions to include explicit negative triggers:\n- research-write: NOT for specs, issues, tasks, beads, or work tracking. Only for storing research findings.\n- Consider adding a \"## NOT For\" or anti-trigger section to research-write SKILL.md\n- Review other research skills for similar ambiguity\n\n## References\n\n- Session where this happened: 464610cc-f14e-421e-b211-aeea38dbc7af\n- Parent issue: dotfiles-5cr (the spec that should have been a bead)","status":"open","priority":3,"issue_type":"bug","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T18:36:21.51094-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T18:36:21.51094-05:00"}
{"id":"dotfiles-dqa","title":"Create linear_core skill (config, auth, mention rules)","description":"Create claude/skills/linear_core/ with SKILL.md + reference/ files. SKILL.md covers: config resolution (.claude/linear.yaml + .claude/linear.local.yaml merge), credential handling (LINEAR_API_TOKEN env var + docs for 1Password/direnv alternatives), mention syntax (https://linear.app/{workspace}/profiles/{displayName} NOT @username), team data lookup patterns. reference/ holds: config schema docs, GraphQL query patterns for teams/users/states. This is the foundational skill all other linear_* skills reference. Uses packages/linear Graffle client.","status":"closed","priority":1,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:18.064541-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:00:11.864777-05:00","closed_at":"2026-01-28T01:00:11.864777-05:00","close_reason":"linear_core skill created with SKILL.md + reference/ files covering config, auth, mentions, and team data","dependencies":[{"issue_id":"dotfiles-dqa","depends_on_id":"dotfiles-1gd","type":"blocks","created_at":"2026-01-28T00:31:27.152607-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-ds9","title":"Try CC 2.1.18 custom keybindings – can vim mode be customized?","description":"## Context\n\nCC 2.1.18 introduced custom keybindings: https://code.claude.com/docs/en/keybindings\nRun `/keybindings` to get started. Supports per-context config and chord sequences.\n\n## Question to Answer\n\nCan vim mode keybindings be customized, or only the component-level keybindings?\n\nThe docs are vague. They say vim mode and keybindings \"operate independently\":\n\n\u003e - Vim mode handles input at the text input level (cursor movement, modes, motions)\n\u003e - Keybindings handle actions at the component level (toggle todos, submit, etc.)\n\u003e - The Escape key in vim mode switches INSERT to NORMAL mode; it does not trigger chat:cancel\n\u003e - Most Ctrl+key shortcuts pass through vim mode to the keybinding system\n\u003e - In vim NORMAL mode, ? shows the help menu (vim behavior)\n\nThis suggests you can only customize component-level actions (chat:cancel, todo:toggle, etc.) but NOT the vim motions/modes themselves. But it's unclear — need to try it hands-on.\n\n## Tasks\n\n- [ ] Read the full keybindings docs page\n- [ ] Check if there's a keybindings config file or JSON schema\n- [ ] Try remapping a vim-level key (e.g. Escape, j/k) and see if it works\n- [ ] Try remapping a component-level key while vim mode is on\n- [ ] Document findings","status":"open","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T22:14:04.620456-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T22:15:17.993032-05:00"}
{"id":"dotfiles-ern","title":"Create linear_current-issue skill (issue context resolution)","description":"Create claude/skills/linear_current-issue/ with SKILL.md. Resolution order: (1) check branch name for issue identifier pattern, (2) load .claude/issue.md context file if exists, (3) query Linear for user's assigned incomplete issues, (4) ask user as last resort. Port from HB's current-linear-issue skill. References linear_core for config/auth and packages/linear Graffle client for queries.","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:19.63849-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:03:20.330285-05:00","closed_at":"2026-01-28T01:03:20.330285-05:00","close_reason":"linear_current-issue skill created with branch→context file→query→ask resolution chain","dependencies":[{"issue_id":"dotfiles-ern","depends_on_id":"dotfiles-dqa","type":"blocks","created_at":"2026-01-28T00:31:27.300217-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-fn1","title":"Migrate HB: remove Linear MCP + old skills, add config, update refs","description":"In HB repo (heartbeat-chat/Heartbeat): (1) Delete .mcp.json 'linear' entry (StreamLinear). (2) Remove official Linear plugin from marketplace config if present. (3) Clean settings.json / settings.local.json / settings.local.json.example — remove mcp__linear permissions. (4) Delete skills: managing-linear-issues/, current-linear-issue/, uploading-to-linear/. (5) Create .claude/linear.yaml with HB team data (11 members with UUIDs, workspace slug 'heartbeat-chat', team IDs). (6) Create .claude/linear.local.yaml.example showing override pattern. (7) Update CLAUDE.md references from old skill names to new linear_* namespace. (8) Add .claude/linear.local.yaml to .gitignore.","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:21.651367-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:07:34.988145-05:00","closed_at":"2026-01-28T01:07:34.988145-05:00","close_reason":"HB migrated: removed StreamLinear MCP, deleted 3 old skills, created linear.yaml, updated CLAUDE.md references","dependencies":[{"issue_id":"dotfiles-fn1","depends_on_id":"dotfiles-h9m","type":"blocks","created_at":"2026-01-28T00:31:27.505229-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-fn1","depends_on_id":"dotfiles-ern","type":"blocks","created_at":"2026-01-28T00:31:27.573309-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-fn1","depends_on_id":"dotfiles-le0","type":"blocks","created_at":"2026-01-28T00:31:27.639721-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-h8v","title":"Implement shan task subcommand (dump + open)","description":"## Summary\n\nImplement `shan task dump` and `shan task open` subcommands in `packages/shan/`. Design finalized in dotfiles-ws1 (closed — read its conclusion for the full aligned spec).\n\n## Depends On\n\n- **dotfiles-ws1** (closed) — design spec. Read its close reason for the complete aligned design.\n\n## What to Build\n\n### 1. `src/lib/task-schema.ts` — Effect Schema for CC task JSON\n\nDrafted schema (copy to `packages/shan/src/lib/task-schema.ts`):\n\n```typescript\nimport { Schema } from \"effect\"\n\nexport const TaskStatus = Schema.Literal(\n  \"pending\",\n  \"in_progress\",\n  \"completed\",\n  \"deleted\",\n)\nexport type TaskStatus = typeof TaskStatus.Type\n\nexport const TaskMetadata = Schema.Record({\n  key: Schema.String,\n  value: Schema.Unknown,\n})\nexport type TaskMetadata = typeof TaskMetadata.Type\n\nexport const Task = Schema.Struct({\n  id: Schema.String,\n  subject: Schema.String,\n  description: Schema.String,\n  activeForm: Schema.String,\n  status: TaskStatus,\n  blocks: Schema.Array(Schema.String),\n  blockedBy: Schema.Array(Schema.String),\n  owner: Schema.optional(Schema.String),\n  metadata: Schema.optional(TaskMetadata),\n})\nexport type Task = typeof Task.Type\n```\n\n### 2. `src/lib/task-resolver.ts` — Target resolution\n\nParse `\u003clist\u003e@\u003ctask\u003e` syntax. Resolution order:\n1. Exact match on named list dir in `~/.claude/tasks/`\n2. UUID prefix match on task list dirs\n3. Substring match on task subjects across in-scope lists\n4. Fallback: current session (via `/tmp/claude-session-id-{cwdHash}`)\n\nFlags: `--global`/`-g` shows all lists. Default: project-scoped (UUID lists matching current project's session transcripts + all named lists).\n\n### 3. `src/lib/task-picker.ts` — Flat grouped Clack picker\n\nShow all tasks across in-scope lists, grouped by list name:\n```\n◆ Select a task or list:\n│ ▸ [e2e-testing]                    ← selectable (dir-level)\n│   ● #1  Run smoke tests\n│   ◌ #2  Add CI integration\n│ ▸ [dotfiles]                       ← selectable (dir-level)\n│   ● #2  Configure Playwright\n│   ◌ #3  Generate specs             (blocked: #2)\n```\n\nStatus icons: `●` in_progress, `◌` pending, `✓` completed.\nNamed lists: never truncated.\nSort: in_progress → pending → completed (most recent first).\nFreshness: show open + completed within 24h (via file mtime). v1 fallback: all states if tricky.\n\n### 4. `src/bin/task/dump.ts`\n\n| Target | Behavior |\n|--------|----------|\n| Dir (list) | Copy all `.json` files → `.claude/tasks/\u003clist\u003e/` in project |\n| File (task) | Copy single `.json` → `.claude/tasks/\u003clist\u003e/\u003cn\u003e.json` in project |\n| `--md` | Convert each task JSON to formatted markdown instead of raw JSON |\n\n### 5. `src/bin/task/open.ts`\n\n| Target | Behavior |\n|--------|----------|\n| Dir (list) | `zed ~/.claude/tasks/\u003clist\u003e/` |\n| File (task) | `zed ~/.claude/tasks/\u003clist\u003e/\u003cn\u003e.json` |\n\nUses `$EDITOR` with Zed as primary target.\n\n### 6. Wire into `src/bin/shan.ts`\n\nAdd `task` namespace alongside existing `transcript` namespace.\n\n### 7. Companion skill: `claude/skills/shan-tasks/SKILL.md`\n\nDocuments `shan task dump` / `shan task open` so Claude can suggest them for zero-cost task inspection outside CC. No slash command.\n\n## Key Patterns (from existing shan code)\n\n- Entry point: `#!/usr/bin/env bun`, namespace → command → positional args\n- Effect monad for composition and error handling\n- `@clack/prompts` for interactive TUI\n- Session resolver at `src/lib/session-resolver.ts` — reuse project-scoping logic\n- Arg parsing: simple flag extraction + positional collection (see shan.ts)","status":"in_progress","priority":2,"issue_type":"feature","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T15:33:57.064151-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T16:02:21.038709-05:00","dependencies":[{"issue_id":"dotfiles-h8v","depends_on_id":"dotfiles-ws1","type":"blocks","created_at":"2026-01-27T15:34:00.793982-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-h9m","title":"Create linear_managing-issues skill (search, create, update, comment)","description":"Create claude/skills/linear_managing-issues/ with SKILL.md + reference/. Workflows: search issues (with canceled exclusion), create issues (search-before-create guard), update issue state/assignee/priority, comment on issues (with mention syntax from linear_core). Each workflow references the Graffle client from packages/linear for GraphQL operations. Port logic from HB's managing-linear-issues skill but as user-level skill. reference/ holds detailed GraphQL query examples for each operation.","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:18.963191-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:04:04.945505-05:00","closed_at":"2026-01-28T01:04:04.945505-05:00","close_reason":"linear_managing-issues skill created with search, create, update, and comment workflows","dependencies":[{"issue_id":"dotfiles-h9m","depends_on_id":"dotfiles-dqa","type":"blocks","created_at":"2026-01-28T00:31:27.231575-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-i83","title":"Build meta-skill: D2-driven skill authoring","description":"## Problem\n\nDesigning and maintaining complex skills (like git-sync) is manual layout work. You decide what's inline, what's in references, how to structure progressive disclosure, which format to use. These are repeatable decisions that should be derivable from a flow spec.\n\n## Core Insight\n\nProcedural logic is fundamentally a directed graph. Lists are linearizations. D2 expresses the graph directly — making it the natural **design format** for flow-based skills.\n\nLLMs execute best from sequential prose with conditionals — making linearized formats (speclist, markdown) the natural **execution format**.\n\nThese are different jobs. A meta-skill bridges them: reads D2 design intent, produces whatever skill layout CC will execute most reliably from.\n\n## What the Meta-Skill Does\n\n**Input:** A `.d2` file specifying flow intent (nodes, edges, containers, markdown block strings with tables/code/notes)\n\n**Output:** An optimal skill layout — file structure, format choices, progressive disclosure — that CC will execute reliably from.\n\n### Operations\n\n1. **Greenfield** — Generate a new skill from a D2 spec\n2. **Brownfield** — Update an existing skill after D2 spec changes (targeted edits, not full regeneration)\n3. **Validation** — Check that a skill's implementation aligns with its D2 spec, report drift\n\n## D2 as Spec Format\n\nD2 block strings make it expressive enough for skill specs:\n- `|md ... |` — markdown (headers, lists, bold)\n- `||md ... ||` — markdown with tables (double-pipe escapes inner pipes)\n- `|sh ... |` — shell commands with syntax highlighting\n- `|`md ... `|` — alternative delimiter for complex content\n- Container names = operation/procedure names\n- Diamond shapes = decision points\n- Edge labels = conditions\n- Terminal nodes = HALT / END exit points\n- Comments (#) = context not in the flow\n\nD2 source text (not rendered ASCII/SVG) is what agents read. ASCII rendering drops all rich content to empty boxes.\n\n## What We Don't Know Yet\n\nLayout decisions (progressive disclosure, file splitting, format selection, inline vs extracted content) need to be driven by **semantic meaning** — not by graph shape metrics like node count or nesting depth. The right heuristics are unknown and must be discovered empirically.\n\n**The writing-skills TDD principle applies:** Do this workflow manually 2-3 times before encoding as a skill. Each manual iteration should surface what layout decisions were made and WHY — building the heuristic vocabulary.\n\n### Suggested manual iterations\n1. Take git-sync's existing `reference/flow.d2` and try generating SKILL.md from it — note every decision and gap\n2. Design a NEW skill in D2 first, then produce the skill layout — note what D2 couldn't express and what layout choices felt obvious vs. ambiguous\n3. Edit the D2 for an existing skill and try brownfield sync — note where targeted edits worked and where full regeneration was needed\n\n## Dependencies\n\n- D2 skill (syntax, rendering, docs access via `gh api` against `terrastruct/d2-docs`)\n- speclist skill (flow format syntax — used when warranted, not always)\n- writing-skills (token budgets, CSO, anti-patterns, quality criteria)\n- writing-compact (formatting rules when compressing)\n\n## Prior Art\n\n- git-sync: complex flow-based skill (8 Plan steps, 6 Execute steps, 5 Procedures) — analyzed as test case\n- git-sync now has `reference/flow.d2` as a companion visual reference — candidate for first manual iteration\n- d2lang.com blocks automated fetches (403); use `gh api repos/terrastruct/d2-docs/contents/docs/tour/\u003cpage\u003e.md --jq '.content' | base64 -d` for docs","notes":"## Goal\n\nA validated design for the meta-skill, produced through manual iterations. **Done** means:\n\n1. 2-3 manual iterations completed (D2 → skill layout, each documenting decisions made and why)\n2. Heuristics for layout decisions discovered and documented (what drives format selection, progressive disclosure, file splitting — based on semantic meaning, not graph shape)\n3. A design doc describing the meta-skill's operations, inputs, outputs, and decision heuristics — ready to be encoded as a SKILL.md in a follow-up bead\n\n**Not in scope:** Building the actual skill. That's a follow-up after the design is validated.\n\n## Completed\n\nAll 3 iterations completed. Design doc written to `claude/skills/d2-skill-authoring/d2-skill-authoring.md`.\n\nIteration evidence in `claude/skills/d2-skill-authoring/reference/`:\n- `iteration-1-greenfield-git-sync.md` — Generated SKILL.md from git-sync's flow.d2\n- `iteration-2-d2-first-pr-ship.md` — Designed new pr-ship skill D2-first\n- `iteration-3-brownfield-sync.md` — Targeted edits after D2 modification\n\n### Key Discoveries\n1. D2 captures ~50% of skill info; enrichment gaps are predictable by node type\n2. Layout decisions are mostly mechanical (D2 structure → SKILL.md format)\n3. The hard part is enrichment, not layout\n4. Brownfield sync works for structural edits; topological edits need full regeneration\n5. Semantic signals (not graph shape metrics) should drive support file decisions","status":"closed","priority":1,"issue_type":"feature","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T10:25:05.704533-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T12:45:24.142149-05:00","closed_at":"2026-01-27T12:45:24.142149-05:00","close_reason":"All 3 manual iterations completed. Design doc with heuristics written to claude/skills/d2-skill-authoring/d2-skill-authoring.md. Ready for follow-up bead to encode as SKILL.md."}
{"id":"dotfiles-ifu","title":"Add teacher/doctor naming convention to skills rules","description":"Add naming convention to .claude/rules/skills.md:\n\n**teacher**: Educational, documentation, explaining concepts, reference material\n**doctor**: Setup, config checking, onboarding, linting, debugging, diagnostics\n\nThen rename 4 high-confidence skills:\n- cc:internals → cc:teacher-internals\n- audit → dotfiles:doctor  \n- cc:chrome-debugging → cc:doctor-chrome\n- reviewing-skills → skills:doctor","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T11:39:09.123599-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T11:39:15.760326-05:00"}
{"id":"dotfiles-le0","title":"Create linear_uploading skill (upload, attach, download files)","description":"Create claude/skills/linear_uploading/ with SKILL.md + reference/. Three workflows: (1) Upload for embed — upload file, get assetUrl, use \\![](assetUrl) in markdown. (2) Attach — paperclip attachment to issue (documents, PDFs). (3) Download — fetch issue attachments + embedded media to disk for analysis. References packages/linear upload.ts and download.ts helpers. Port decision logic from HB's uploading-to-linear skill (attachment vs embed choice).","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:20.350607-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:03:32.283116-05:00","closed_at":"2026-01-28T01:03:32.283116-05:00","close_reason":"linear_uploading skill created with upload-for-embed, attach, and download workflows","dependencies":[{"issue_id":"dotfiles-le0","depends_on_id":"dotfiles-dqa","type":"blocks","created_at":"2026-01-28T00:31:27.36764-05:00","created_by":"Jason Kuhrt"},{"issue_id":"dotfiles-le0","depends_on_id":"dotfiles-ret","type":"blocks","created_at":"2026-01-28T00:31:27.436891-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-n79","title":"Apply namespace to git-*, ts-*, research-* skills + merge shan-tasks into shan","description":"Rename remaining namespaced skill groups and merge shan-tasks.\n\ngit-* skills:\n- git-commit → git_commit (git:commit)\n- git-mode-control → git_mode-control (git:mode-control)\n- git-sync → git_sync (git:sync)\n- git-worktree → git_worktree (git:worktree)\n\nts-* skills:\n- ts-benchmarking-types → ts_benchmarking-types (ts:benchmarking-types)\n- ts-buildinfo → ts_buildinfo (ts:buildinfo)\n- ts-domain-modeling → ts_domain-modeling (ts:domain-modeling)\n- ts-exploring-packages → ts_exploring-packages (ts:exploring-packages)\n- ts-formatting-conditional-types → ts_formatting-conditional-types (ts:formatting-conditional-types)\n- ts-type-parameters → ts_type-parameters (ts:type-parameters)\n- ts-writing-jsdoc → ts_writing-jsdoc (ts:writing-jsdoc)\n- ts-writing-tests → ts_writing-tests (ts:writing-tests)\n\nresearch-* skills:\n- research-flush-cc-thread → research_flush-cc-thread (research:flush-cc-thread)\n- research-format → research_format (research:format)\n- research-prune → research_prune (research:prune)\n- research-write → research_write (research:write)\n\nshan-tasks merge:\n- Merge shan-tasks content into shan/SKILL.md as a new operation\n- Delete shan-tasks directory after merge\n\nFor each skill:\n1. Rename directory\n2. Update frontmatter name to use colon\n3. Grep for old name references in other skills/rules and update them","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T22:26:16.823174-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T22:48:57.228948-05:00","closed_at":"2026-01-27T22:48:57.228948-05:00","close_reason":"Closed","dependencies":[{"issue_id":"dotfiles-n79","depends_on_id":"dotfiles-c8z","type":"blocks","created_at":"2026-01-27T22:26:28.144042-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-nzo","title":"Linear scripts: unify issue resolution to handle both UUIDs and identifiers","description":"## Problem\n\n`comment.ts` and `update.ts` in `linear_managing-issues` resolve issue parameters using `searchIssues` exclusively. This is a text search API — it searches issue titles, descriptions, and comments. When a UUID is passed instead of an identifier (e.g. `HEA-3849`), searchIssues treats it as a text query and can silently match the wrong issue.\n\n**Observed failure:** A comment intended for HEA-3849 was posted to HEA-2985 because the agent passed a UUID to comment.ts, which fed it to searchIssues as a text query. The text search matched a different issue entirely.\n\n## Root Cause\n\nInconsistent resolution patterns across scripts:\n- `get.ts` — correctly detects UUID vs identifier and uses direct `client.query.issue({ id })` for UUIDs\n- `comment.ts` — always uses `searchIssues` (broken for UUIDs)\n- `update.ts` — always uses `searchIssues` (broken for UUIDs)\n- `resolve.ts` (linear_current-issue) — always uses `searchIssues` (broken for UUIDs)\n\n## Solution\n\nExtract a shared `resolveIssue` utility (e.g. `packages/linear/src/resolve-issue.ts`) that:\n1. Detects if input matches UUID pattern (contains `-`, length \u003e 10, NOT matching `^[A-Z]+-\\d+$`) → uses `client.query.issue({ id })` for direct lookup\n2. Detects if input matches identifier pattern (`^[A-Z]+-\\d+$`) → uses `searchIssues`\n3. Returns the resolved issue ID or errors clearly\n\nUpdate all scripts to use this shared resolver:\n- `~/.claude/skills/linear_managing-issues/scripts/comment.ts`\n- `~/.claude/skills/linear_managing-issues/scripts/update.ts`\n- `~/.claude/skills/linear_managing-issues/scripts/get.ts` (already has the logic, refactor to use shared util)\n- `~/.claude/skills/linear_current-issue/scripts/resolve.ts`\n\n## Impact\n\nSilent data corruption — comments/updates land on wrong issues with no error. P2 because it requires an agent to accidentally pass a UUID (uncommon path) but the failure mode is severe (wrong-issue mutation with no warning).","status":"closed","priority":2,"issue_type":"bug","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T12:53:48.974235-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T12:58:07.640727-05:00","closed_at":"2026-01-28T12:58:07.640727-05:00","close_reason":"Added shared resolve-issue.ts utility. Updated comment.ts, update.ts, get.ts, and resolve.ts to use unified UUID-vs-identifier detection."}
{"id":"dotfiles-ozp","title":"Consolidate beads_* user skills into single skill","description":"Merge 3 beads_* USER skills (teacher, fanout, teacher-refresh) into single beads-meta router skill. These are the user-level skills about beads methodology, NOT the plugin commands (which are untouchable).\n\nRegistry savings: ~2 entries (~90 tokens).","status":"open","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:19.547589-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:19.547589-05:00"}
{"id":"dotfiles-qg8","title":"Evaluate Tokyo Night tmux plugin","description":"Investigate if tmux-tokyonight plugin is needed.\n\n**Current state:**\n- Tokyo Night theme configured at Ghostty terminal level\n- tmux status bar uses minimal styling (bg=default, fg=white/cyan)\n\n**Question:**\nDoes Ghostty's Tokyo Night theme cascade into tmux adequately, or does tmux need its own theme plugin for:\n- Status bar colors\n- Pane borders\n- Copy mode highlighting\n- Message/prompt colors\n\n**Plugin:** https://github.com/janoamaern/tokyo-night-tmux (or similar)\n\n**Decision criteria:**\n- If current look is acceptable → skip plugin\n- If tmux UI elements look inconsistent → add plugin","status":"open","priority":3,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-25T14:07:54.6932-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-25T14:07:54.6932-05:00"}
{"id":"dotfiles-ret","title":"Implement file upload/download helpers in packages/linear","description":"Add src/upload.ts and src/download.ts to packages/linear. Upload: 3-step signed URL flow (fileUpload mutation → HTTP PUT binary to GCS signed URL → attachmentCreate mutation). Download: auth'd HTTP GET to uploads.linear.app with Bearer token, save to disk. These are the only non-GraphQL operations — everything else goes through the Graffle client. Reference StreamLinear source and existing HB scripts (attach.sh, upload.sh, linear-fetch) for the exact API flow.","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T00:31:17.156078-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T01:00:51.012649-05:00","closed_at":"2026-01-28T01:00:51.012649-05:00","close_reason":"upload.ts (3-step signed URL flow) and download.ts (auth'd GET + save) implemented in packages/linear","dependencies":[{"issue_id":"dotfiles-ret","depends_on_id":"dotfiles-1gd","type":"blocks","created_at":"2026-01-28T00:31:27.070261-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-s5i","title":"Refactor linear_* skills: scripts over inline code","description":"## Context\n\nLinear skills currently use inline TypeScript code examples that Claude rewrites and executes via `bun -e`. This is token-inefficient - the code patterns are re-read on every skill invocation.\n\n### Current State\n\n- 4 skills: `linear_core`, `linear_managing-issues`, `linear_current-issue`, `linear_uploading`\n- Inline code examples show import + Graffle client usage\n- Import path issue: skills referenced `@jasonkuhrt/linear/client` which isn't globally resolvable\n- Temporary fix: absolute import path in skill markdown (bad - exposes implementation detail)\n\n### Target State\n\n- Each skill has `scripts/` with executable TS files\n- Scripts contain the absolute import path (implementation detail hidden)\n- SKILL.md files document workflows (\"when to search vs create\") and call scripts\n- New `linear_gql` escape hatch skill for arbitrary GraphQL\n\n## Design\n\n### Directory Structure\n\n```\nlinear_core/\n├── SKILL.md                    # Auth, config, mention rules (no code changes needed)\n└── reference/\n\nlinear_managing-issues/\n├── SKILL.md                    # Workflows: search-before-create, validation rules\n├── scripts/\n│   ├── search.ts               # bun scripts/search.ts \"query\" [--status open]\n│   ├── get.ts                  # bun scripts/get.ts HEA-123\n│   ├── create.ts               # bun scripts/create.ts --title \"...\" --team HEA [--assignee UUID]\n│   ├── update.ts               # bun scripts/update.ts HEA-123 --state \"In Progress\"\n│   └── comment.ts              # bun scripts/comment.ts HEA-123 \"comment body\"\n└── reference/\n\nlinear_current-issue/\n├── SKILL.md                    # Resolution logic (branch → context file → search → ask)\n└── scripts/\n    └── resolve.ts              # bun scripts/resolve.ts [--branch] [--context-file]\n\nlinear_uploading/\n├── SKILL.md                    # Upload vs attach decision tree\n└── scripts/\n    ├── upload.ts               # bun scripts/upload.ts /path/to/file\n    ├── attach.ts               # bun scripts/attach.ts HEA-123 /path/to/file\n    └── download.ts             # bun scripts/download.ts \u003curl\u003e [--output /path]\n\nlinear_gql/                     # NEW - escape hatch\n├── SKILL.md                    # Documents absolute import path for custom queries\n└── scripts/\n    └── query.ts                # bun scripts/query.ts '{ viewer { id name } }'\n```\n\n### Script Implementation Pattern\n\n```typescript\n#!/usr/bin/env bun\n// scripts/search.ts\nimport { client } from '/Users/jasonkuhrt/projects/jasonkuhrt/dotfiles/packages/linear/src/client.ts'\nimport { parseArgs } from 'util'\n\nconst { values, positionals } = parseArgs({\n  args: Bun.argv.slice(2),\n  options: { status: { type: 'string' } },\n  allowPositionals: true,\n})\n\nconst query = positionals[0]\nif (!query) { console.error('Usage: search.ts \u003cquery\u003e [--status open|closed]'); process.exit(1) }\n\nconst results = await client.query.issueSearch({\n  $: { query, first: 20 },\n  nodes: { id: true, identifier: true, title: true, url: true, state: { name: true, type: true } },\n})\n\n// Filter canceled unless explicitly requested\nconst filtered = results.nodes.filter(i =\u003e values.status || i.state.type !== 'canceled')\nconsole.log(JSON.stringify(filtered, null, 2))\n```\n\n### SKILL.md Pattern (no code, just workflows)\n\n```markdown\n## Search Issues\n\n\\`\\`\\`bash\nbun scripts/search.ts \"auth bug\"\nbun scripts/search.ts \"login\" --status open\n\\`\\`\\`\n\n**Default:** Excludes canceled issues. Results are JSON array.\n\n## Create Issue\n\n**CRITICAL:** Always search before creating to avoid duplicates.\n\n\\`\\`\\`bash\nbun scripts/search.ts \"topic of new issue\"\n# If no match:\nbun scripts/create.ts --title \"Issue title\" --team HEA --description \"Details\"\n\\`\\`\\`\n```\n\n## Tasks\n\n1. Create `linear_gql` escape hatch skill with `scripts/query.ts`\n2. Add `scripts/` to `linear_managing-issues` (search, get, create, update, comment)\n3. Add `scripts/` to `linear_current-issue` (resolve)\n4. Add `scripts/` to `linear_uploading` (upload, attach, download)\n5. Rewrite SKILL.md files to call scripts instead of showing inline code\n6. Remove absolute import path from all SKILL.md and reference/*.md files\n7. Test each script works standalone\n\n## References\n\n- Session context: discussed bun link vs absolute paths, settled on absolute paths in scripts\n- `cc_writing-skills` now documents \"Scripts Over Inline Code\" pattern\n- Absolute import: `/Users/jasonkuhrt/projects/jasonkuhrt/dotfiles/packages/linear/src/client.ts`","status":"closed","priority":1,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T11:02:33.265002-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T11:11:55.769569-05:00","closed_at":"2026-01-28T11:11:55.769569-05:00","close_reason":"Refactored linear_* skills to use scripts instead of inline code. Created 11 scripts across 4 skills, updated all SKILL.md and reference files."}
{"id":"dotfiles-t5k","title":"Apply cc_ namespace to cc-* and claude-* skills","description":"Rename all cc-* and claude-* skill directories to use underscore namespace delimiter, and update frontmatter names to use colons.\n\ncc-* skills (dir rename + frontmatter update):\n- cc-ask-user-question → cc_ask-user-question (cc:ask-user-question)\n- cc-internals → cc_internals (cc:internals)\n- cc-managing-marketplaces → cc_managing-marketplaces (cc:managing-marketplaces)\n- cc-managing-mcp → cc_managing-mcp (cc:managing-mcp)\n- cc-managing-permissions → cc_managing-permissions (cc:managing-permissions)\n- cc-managing-plugins → cc_managing-plugins (cc:managing-plugins)\n- cc-session-get-id → cc_session-get-id (cc:session-get-id)\n- cc-session-search → cc_session-search (cc:session-search)\n- cc-tasks → cc_tasks (cc:tasks)\n- cc-writing-hooks → cc_writing-hooks (cc:writing-hooks)\n- cc-writing-rules → cc_writing-rules (cc:writing-rules)\n- cc-writing-skills → cc_writing-skills (cc:writing-skills)\n- cc-config-placement → cc_config-placement (cc:config-placement)\n\nclaude-* → cc_ (namespace change + dir rename):\n- claude-chrome-debugging → cc_chrome-debugging (cc:chrome-debugging)\n- claude-fork → cc_fork (cc:fork)\n- claude-markers → cc_markers (cc:markers)\n- claude-skills-tmp-dir → cc_skills-tmp-dir (cc:skills-tmp-dir)\n\nFor each skill:\n1. Rename directory (hyphen→underscore at namespace boundary)\n2. Update frontmatter name to use colon\n3. Grep for old name references in other skills/rules and update them","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T22:26:15.324353-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T22:48:57.230791-05:00","closed_at":"2026-01-27T22:48:57.230791-05:00","close_reason":"Closed","dependencies":[{"issue_id":"dotfiles-t5k","depends_on_id":"dotfiles-c8z","type":"blocks","created_at":"2026-01-27T22:26:27.930372-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-uor","title":"Consolidate linear_* user skills into single router skill","description":"Merge 6 linear_* skills (core, managing-issues, uploading, current-issue, gql, workspace-pull) into single linear router skill.\n\nlinear_managing-issues has progressive disclosure (reference/ + scripts/). Its files move under reference/managing-issues/ and scripts/ (prefixed if needed).\nlinear_core, linear_uploading also have multiple files.\n\nRegistry savings: ~5 entries (~230 tokens).","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:15.431525-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:15.431525-05:00"}
{"id":"dotfiles-vkm","title":"Consolidate gh_* user skills into 2 router skills","description":"Merge 8 gh_* skills into 2 routers:\n- gh_pr: pr-resolve-review, pr-checks, pr-comment-write, pr-ai-reviewers, pr-test-resolve-review\n- gh_actions: actions, actions-ts, issue-read\n\ngh_pr-resolve-review already has progressive disclosure (9 files including item-model.md, terminal-view.md, etc). Its files move under reference/pr-resolve-review/.\ngh_pr-checks has 15 files. Same treatment.\n\nRegistry savings: ~6 entries (~280 tokens).","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:13.510947-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:13.510947-05:00"}
{"id":"dotfiles-ws1","title":"Create tl CLI for CC task list inspection","description":"## Summary\n\nA `tl` CLI (Bun, in `packages/tl/`) for inspecting CC task list files from outside a session. Zero token cost — runs in shell, not inside CC.\n\n## Context\n\nCC task lists persist at `~/.claude/tasks/\u003clist-id\u003e/` as JSON files (one per task). Currently no way to browse/read them outside a CC session without manually `cat`-ing JSON files. Need a quick CLI for the human side.\n\n## Operations\n\n### `tl open [target]`\n\nOpen task JSON in editor.\n\n- **Target:** task number OR fuzzy match on subject\n- **Editor:** Use `$EDITOR` if set. If `$EDITOR=nvim`, open in terminal. If `zed`, opens as tab.\n- **List selection:** If `CLAUDE_CODE_TASK_LIST_ID` is set, use that. Otherwise, prompt or use most recently modified list dir.\n- **No target:** show picker (list all tasks, select one)\n\n### `tl dump [target]`\n\nDump formatted task to stdout (or to tmp file for piping).\n\n- **Target:** same as `open` — number or fuzzy match\n- **Output:** Human-readable formatted markdown, not raw JSON\n- **No target:** dump all tasks as formatted table (id, status, subject, blocked-by)\n- **Format:**\n  ```\n  # Task 4: Generate Playwright specs from D2 flows\n  Status: pending\n  Blocked by: #2, #3\n  \n  [full description]\n  ```\n\n## Design Decisions\n\n- **Bun CLI** — matches `shan` pattern in `packages/shan/`\n- **Package:** `packages/tl/` with `bin: { \"tl\": \"./src/bin/tl.ts\" }`\n- **Global availability:** Symlink into PATH via dotfiles sync (e.g. `ln -s $(pwd)/packages/tl/src/bin/tl.ts ~/.local/bin/tl` or add packages/tl to Brewfile as local formula)\n- **Task list discovery:** Read `CLAUDE_CODE_TASK_LIST_ID` env var → `~/.claude/tasks/$id/`. Fallback: list dirs in `~/.claude/tasks/`, pick most recently modified (or prompt).\n- **Fuzzy match:** Simple substring on subject field. Don't over-engineer — `tl open scaffold` matching \"Scaffold apps/e2e/ Nx app with Playwright\" is enough.\n\n## JSON Schema Reference (from cc-tasks skill)\n\nEach task is `~/.claude/tasks/\u003clist-id\u003e/\u003cn\u003e.json`:\n```json\n{\n  \"id\": \"4\",\n  \"subject\": \"Generate Playwright specs from D2 flows\",\n  \"description\": \"Read D2 flow files + codebase source to...\",\n  \"activeForm\": \"Generating Playwright specs from D2 flows\",\n  \"status\": \"pending\",\n  \"owner\": null,\n  \"blocks\": [],\n  \"blockedBy\": [\"2\", \"3\"],\n  \"metadata\": {}\n}\n```\n\n## Not in Scope (for now)\n\n- Inline viewing inside CC (eats context window)\n- Task mutation (that's CC's job)\n- Watch mode / live updates\n- Dependency graph visualization","status":"closed","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T14:57:44.897542-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T15:33:31.160071-05:00","closed_at":"2026-01-27T15:33:31.160071-05:00","close_reason":"Design complete. Original spec proposed a standalone `tl` CLI in `packages/tl/`. Revised to augment existing `packages/shan/` CLI instead — avoids duplicating infrastructure (Effect, Clack, session resolver, arg parsing).\n\n## Final Aligned Spec: `shan task`\n\n### Commands\n- `shan task dump [target] [--md] [--global/-g]` — copy raw task JSON to `.claude/tasks/\u003clist\u003e/` in project. `--md` for markdown formatting.\n- `shan task open [target] [--global/-g]` — open task JSON/dir in $EDITOR (Zed). No formatting.\n\n### Target Syntax\n- `\u003clist\u003e` — named list or UUID prefix match\n- `\u003clist\u003e@\u003ctask\u003e` — specific task within a list\n- `\u003csubject-substring\u003e` — fuzzy match on subject across in-scope lists\n- No target → flat Clack picker grouped by list, both list-headers and tasks selectable\n\n### Scoping\n- Default: project-scoped (UUID lists matching current project's sessions + all named lists)\n- `--global`/`-g`: all lists\n\n### Dir vs File targets\n- List target (dir): `open` → opens Zed to dir; `dump` → copies all JSON files\n- Task target (file): `open` → opens specific JSON; `dump` → copies single file\n\n### Picker Design\nFlat list grouped by list name. Status icons: ● in_progress, ◌ pending, ✓ completed. Named lists never truncated. Freshness filter: open + completed within 24h (v1 fallback: all states).\n\n### Modules\n- `src/lib/task-resolver.ts` — parse \u003clist\u003e@\u003ctask\u003e, resolve to fs paths\n- `src/lib/task-schema.ts` — Effect Schema (drafted, see execution bead)\n- `src/lib/task-picker.ts` — grouped Clack picker\n- `src/bin/task/dump.ts` — copy raw JSON (or --md) to .claude/tasks/\n- `src/bin/task/open.ts` — open in $EDITOR\n\n### Companion Skill\n`claude/skills/shan-tasks/SKILL.md` — documents commands for zero-cost task inspection outside CC. No slash command.\n\n### Effect Schema (drafted from real task files)\nSee execution bead description for full schema source. 8 fields: id, subject, description, activeForm, status, blocks, blockedBy + optional owner, metadata."}
{"id":"dotfiles-y4k","title":"CC docs: rules use paths: not globs: frontmatter key","description":"CC rules frontmatter key is paths:, not globs:. globs: is Cursor's key and CC silently ignores it, causing rules to load unconditionally. Also paths: values must be quoted YAML arrays, not comma-separated strings. Separately, upstream bug anthropics/claude-code#16299 means even correctly-keyed paths: rules may load globally. Fixed: typescript.md frontmatter, markdown-compact-mode.md frontmatter, cc_writing-rules skill updated.","status":"closed","priority":4,"issue_type":"bug","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T13:03:11.85181-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T13:23:31.449256-05:00","closed_at":"2026-01-28T13:23:31.449256-05:00","close_reason":"Fixed remaining 3 files using globs: instead of paths: frontmatter"}
{"id":"dotfiles-ybl","title":"Design experiment suite: D2 features × agent comprehension","description":"## Problem\n\nThe i83 design doc discovered heuristics through manual iterations, but those iterations had context contamination (the experimenter already knew the right answers). We need clean experiments using subagents as naive test subjects.\n\nAdditionally, i83 only explored flowcharts. D2 has sequence diagrams, layers, scenarios, steps, imports, classes, tooltips, and vars — all potentially relevant to skill authoring. We don't know which features agents actually benefit from.\n\n## What Needs Designing\n\nAn experiment suite that tests two axes:\n\n### Axis 1: Enrichment strategies\nHow much information does D2 need to carry for an agent to produce a good skill?\n\n- **Baseline:** D2 only (no conventions, no enrichment)\n- **Conventions:** D2 + authoring conventions from i83 design doc\n- **Light enrichment:** D2 + classes/tooltips for node typing (invisible in rendered output)\n- **Heavy enrichment:** D2 + vars for glossary + tooltips for commands + classes for node types\n- **Mapping guide:** D2 + explicit feature→concept mapping document\n\nKey question: Does a mapping guide help, hurt (over-constrain), or not matter?\n\n### Axis 2: D2 diagram types × skill patterns\nWhich D2 diagram type best serves which skill pattern?\n\n- **Flowcharts → procedural skills** (established baseline)\n- **Sequence diagrams → interaction-heavy skills** (e.g., pr-resolve-review, user↔agent↔tool protocols)\n- **Steps → state progression skills** (e.g., deploy pipelines, migration sequences)\n- **Layers → progressive disclosure** (overview → detail abstraction levels)\n- **Scenarios → degradation variants** (with/without optional tools)\n\n### Axis 3: Composition models\nHow should multi-operation skills organize their D2?\n\n- **Single file, containers = operations** (i83 approach)\n- **One file per operation, imports for shared procedures**\n- **One file with layers for abstraction levels**\n- **Mixed: flowchart for operations + sequence diagram for interaction sub-parts**\n\n## Experiment Design Constraints\n\n- Each experiment must use **subagents** as test subjects (context-clean)\n- Test subjects should receive ONLY the D2 + whatever enrichment strategy is being tested\n- Compare output against a known-good SKILL.md (that the subject never saw)\n- Need real skills as test cases across complexity tiers (minimal, simple, medium, complex)\n- Need skills across pattern types (procedural, interaction-heavy, reference-like)\n\n## Test Cases to Select\n\nNeed 4-6 skills spanning the experiment space:\n- 1 existing complex procedural skill (git-sync — known baseline from i83)\n- 1 existing interaction-heavy skill (pr-resolve-review?)\n- 1 simple procedural skill (git-commit or git-worktree?)\n- 1 new skill designed in D2-first (pr-ship from i83 iteration 2?)\n- 1 skill that degrades gracefully (with/without optional tools)\n- 1 skill with shared procedures across operations\n\n## Deliverable\n\nA structured experiment plan: test matrix, test cases, evaluation criteria, and execution order. NOT running the experiments yet — just the design.\n\n## Dependencies\n\n- i83 design doc (claude/skills/d2-skill-authoring/d2-skill-authoring.md) — provides baseline heuristics\n- D2 skill — syntax reference for all D2 features\n- writing-skills methodology — TDD baseline testing approach","status":"in_progress","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-27T14:05:59.522603-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-27T15:02:23.219214-05:00","dependencies":[{"issue_id":"dotfiles-ybl","depends_on_id":"dotfiles-i83","type":"blocks","created_at":"2026-01-27T14:06:03.681461-05:00","created_by":"Jason Kuhrt"}]}
{"id":"dotfiles-ymv","title":"Fix CC doc lookup priority: ref MCP and skills before web search","description":"When asked to look up documentation (e.g. CC rules frontmatter docs), Claude reaches for web search / Task(Research...) instead of:\n\n1. Using ref MCP (ref_search_documentation) which is configured and has docs indexed\n2. Using built-in skills like cc_internals, cc_writing-rules, etc. that already contain CC documentation\n\nExample failure: User asks 'find out the rules frontmatter docs' and Claude spawns a Task(Research CC rules frontmatter docs) agent that does web searches, when it should invoke the cc_writing-rules or cc_internals skill first, or use ref MCP.\n\nThis is a recurring pattern - the rules and skills exist but CC doesn't prioritize them over generic web research.\n\nFix approach: Add/improve rules that establish the doc lookup priority chain:\n1. Check if a skill covers the topic (invoke it)\n2. Use ref MCP (ref_search_documentation)  \n3. Only then fall back to web search\n\nRelated existing rules: ref.md (already says to use ref), using-superpowers skill (already says to check skills first). The problem may be that these aren't specific enough about doc lookup scenarios.","status":"open","priority":2,"issue_type":"bug","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T13:11:49.904152-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T13:11:49.904152-05:00"}
{"id":"dotfiles-zpx","title":"Consolidate ts_* user skills into 2 router skills","description":"Merge 8 ts_* skills into 2 routers:\n- ts_conventions: type-parameters, formatting-conditional-types, writing-jsdoc, domain-modeling\n- ts_tooling: buildinfo, exploring-packages, benchmarking-types, writing-tests\n\nts_writing-jsdoc has progressive disclosure (6 files). Its files move under reference/writing-jsdoc/.\n\nRegistry savings: ~6 entries (~280 tokens).","status":"open","priority":2,"issue_type":"task","owner":"jasonkuhrt@me.com","created_at":"2026-01-28T14:44:14.623228-05:00","created_by":"Jason Kuhrt","updated_at":"2026-01-28T14:44:14.623228-05:00"}
