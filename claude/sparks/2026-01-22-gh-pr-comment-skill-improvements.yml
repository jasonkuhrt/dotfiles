title: Improve gh PR comment viewing skill
captured: 2026-01-22
context: Asking Claude to show latest PR comment from teammate - got verbose JSON dumps instead of formatted output
session: ~/.claude/projects/-Users-jasonkuhrt-projects-heartbeat-chat-Heartbeat--worktrees-feat-HEA-3751-tsgo-spike/946af728-0ef0-46e9-9648-4b7bf9317ac8.jsonl
idea: |
  Improve skill for viewing PR comments. Two main problems:

  ## 1. Output formatting for humans vs context

  Tool output bloats context with raw JSON when human just needs readable summary.

  Desired output format:
  ```
  @suchipi <Date> #650
  | I'm a little bit concerned about ESM module execution order stuff
  | (as noted here), but otherwise all the swc stuff looks good. It
  | doesn't seem like we use const enums or namespace declaration
  | merging (except for types-only stuff eg. Jest and Express), so we
  | should be good.
  ```

  Actual: Multiple gh API calls dumping 80+ line JSON blobs with `… +N lines (ctrl+o to expand)`.

  Solution: Skill should use jq to format output for human readability, not raw JSON.
  The pretty-printed output is for human viewing only - doesn't need to be in context.

  ## 2. Team member handle resolution

  Claude doesn't know "lily" → @suchipi mapping. Should:
  - Check a local state file for known name→handle mappings
  - If unknown, ask user once, then persist for future sessions
  - State file location: maybe `.claude/state/github-handles.json` or similar

  ## 3. Know where to look

  Claude tried multiple endpoints before finding the comment:
  - `.comments` (issue comments)
  - `/pulls/{id}/comments` (line comments)
  - `/pulls/{id}/reviews` (review comments) ← where it actually was

  Skill should know the PR comment taxonomy and check the right places first,
  or check all three in parallel.
revisit: 'near-term: when improving gh-related skills or adding state persistence patterns'
