title: Package manager skill (lock conflicts, monorepo patterns)
captured: 2026-01-22
context: Reviewing Claude transcripts showing poor package manager decisions
session: ~/.claude/projects/-Users-jasonkuhrt-projects-heartbeat-chat-Heartbeat--worktrees-feat-HEA-3751-tsgo-spike/946af728-0ef0-46e9-9648-4b7bf9317ac8.jsonl
idea: |
  Create a skill that teaches effective package manager usage:

  ## Lock file conflict resolution
  Use built-in CLI features (not git checkout tricks):
  - npm: `npm install --package-lock-only`
  - pnpm: `pnpm install --lockfile-only`
  - yarn: `yarn install --mode update-lockfile`

  Claude bombed this by trying `git checkout --theirs package-lock.json && npm install`.

  ## Monorepo: overrides vs root deps

  Overrides are better than moving runtime deps to workspace root because packages must be self-contained.

  | Approach        | How it works                                         | Self-contained? |
  |-----------------|------------------------------------------------------|-----------------|
  | Root runtime    | Put react at root, packages inherit via hoisting     | No - deps implicit |
  | Overrides       | Each package declares deps, override forces version  | Yes - deps explicit |

  Why self-containment matters:
  - Packages can be extracted to own repo
  - Clear dependency graphs
  - Works with pnpm deploy / publishing
  - Easier auditing ("what does this package need?")

  When to use each:
  | Use case                      | Solution                                          |
  |-------------------------------|---------------------------------------------------|
  | Runtime deps (react, lodash)  | Declare in each package, override for consistency |
  | Type defs (@types/*)          | Root devDeps (dev-only, hoisting fine)            |
  | Tooling (typescript, prettier)| Root devDeps (shared workspace tooling)           |

  Overrides specifically force transitive/peer deps to align - e.g. @types/react peer deps
  pulled in at different versions.
revisit: 'fast-follow: next time we hit a lock file conflict or monorepo dep question'
