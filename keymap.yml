# ╔════════════════════════════════════════════════════════════════════════════╗
# ║  Declarative Keymap - Single Source of Truth                               ║
# ║  Tools: zed, nvim, kitty, fish, cc (claude code)                           ║
# ╚════════════════════════════════════════════════════════════════════════════╝
#
# Navigation strategy (hjkl + modifier philosophy): see hjkl-navigation.md
#
# Legend:
#   C-x    = ctrl+x
#   M-x    = alt/meta+x
#   S-x    = shift+x
#   D-x    = cmd+x (macOS)
#   <spc>  = space (leader)
#   <cr>   = enter
#   "-"    = no equivalent in this tool
#   "?"    = TBD / needs mapping

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# MODE SWITCHING
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

mode:
  normal_from_insert:
    desc: Exit insert mode
    zed: "k j"
    nvim: "kj"
    fish: "kj"
    cc: "kj"

  normal_from_visual:
    desc: Exit visual mode
    zed: "q"
    nvim: "<esc>"
    cc: "<esc>"

  exit_terminal:
    desc: Exit terminal insert mode
    nvim: "kj"        # <C-\><C-n>

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# PANE/WINDOW NAVIGATION
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

pane:
  focus_up:
    desc: Focus pane above
    zed: "C-k"
    nvim: "C-k"           # smart-splits.nvim (crosses nvim↔kitty)
    kitty: "C-k"          # neighboring_window (passthrough when nvim focused)

  focus_down:
    desc: Focus pane below
    zed: "C-j"
    nvim: "C-j"
    kitty: "C-j"

  focus_left:
    desc: Focus pane left
    zed: "C-h"
    nvim: "C-h"
    kitty: "C-h"

  focus_right:
    desc: Focus pane right
    zed: "C-l"
    nvim: "C-l"
    kitty: "C-l"

  resize_up:
    desc: Resize pane up
    nvim: "M-k"           # smart-splits.nvim
    kitty: "M-k"          # kitten relative_resize.py

  resize_down:
    desc: Resize pane down
    nvim: "M-j"
    kitty: "M-j"

  resize_left:
    desc: Resize pane left
    nvim: "M-h"
    kitty: "M-h"

  resize_right:
    desc: Resize pane right
    nvim: "M-l"
    kitty: "M-l"

  create_up:
    desc: Create split above
    zed: "C-D-k"          # pane::SplitUp
    kitty: "C-D-k"        # launch --location=hsplit

  create_down:
    desc: Create split below
    zed: "C-D-j"
    kitty: "C-D-j"

  create_left:
    desc: Create split left
    zed: "C-D-h"          # pane::SplitLeft
    kitty: "C-D-h"        # launch --location=vsplit

  create_right:
    desc: Create split right
    zed: "C-D-l"
    kitty: "C-D-l"

  zoom:
    desc: Zoom current pane
    zed: "<spc> z"
    kitty: "C-D-z"        # toggle_layout stack

  close:
    desc: Close pane (then window if last)
    kitty: "D-w"           # close_window

  close_all:
    desc: Close all items in pane
    zed: "<spc> w '"
    nvim: "?"

  pin_tab:
    desc: Pin current tab
    zed: "<spc> w p"
    nvim: "-"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# DOCK/PANEL TOGGLES
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

dock:
  toggle_left:
    desc: Toggle left dock/sidebar
    zed: "D-h"

  toggle_right:
    desc: Toggle right dock/sidebar
    zed: "D-l"

  toggle_bottom:
    desc: Toggle bottom dock/panel
    zed: "D-j"

  close_all_docks:
    desc: Close all docks
    zed: "<spc> p P"

panel:
  project:
    desc: Toggle project/file panel
    zed: "<spc> p p"
    nvim: "<spc> p p"

  git:
    desc: Toggle git panel
    zed: "<spc> p g"

  terminal:
    desc: Toggle terminal panel
    zed: "<spc> p t"

  outline:
    desc: Toggle outline panel
    zed: "<spc> p o"

  diagnostics:
    desc: Toggle diagnostics panel
    zed: "<spc> p e"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# PALETTES & FINDERS
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

palette:
  commands:
    desc: Command palette
    zed: ";"
    nvim: ":"
    cc: "/"

  files:
    desc: File finder / quick open
    zed: "<spc> k"
    nvim: "<spc> <spc>"       # also <spc> f f
    cc: "-"

  symbols_buffer:
    desc: Symbols in current buffer
    zed: "<spc> l"
    nvim: "<spc> s s"

  symbols_project:
    desc: Symbols across project
    zed: "<spc> L"
    nvim: "<spc> s S"

  tasks:
    desc: Task runner
    zed: "<spc> j"
    nvim: "-"                 # no built-in equivalent

  recent_projects:
    desc: Open recent project
    zed: "<spc> o"
    nvim: "<spc> f p"

menu:
  next:
    desc: Select next item in menu/picker
    zed: "C-j"
    nvim: "C-j"           # blink.cmp, snacks picker

  prev:
    desc: Select previous item in menu/picker
    zed: "C-k"
    nvim: "C-k"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# MOTION (VIM-STYLE)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

motion:
  scroll_up:
    desc: Scroll up (half page, centered)
    zed: "K"
    nvim: "K"             # remapped to <C-u>zz

  scroll_down:
    desc: Scroll down (half page, centered)
    zed: "J"
    nvim: "J"             # remapped to <C-d>zz

  buffer_prev:
    desc: Previous buffer
    nvim: "H"             # LazyVim default

  buffer_next:
    desc: Next buffer
    nvim: "L"             # LazyVim default

  doc_start:
    desc: Go to start of document
    zed: "D-K"
    nvim: "gg"

  doc_end:
    desc: Go to end of document (centered)
    zed: "D-J"
    nvim: "G"             # remapped to Gzz

  line_start:
    desc: Go to start of line (first non-blank)
    zed: "H"
    nvim: "^"

  line_end:
    desc: Go to end of line
    zed: "L"
    nvim: "$"

  sneak_forward:
    desc: Sneak/leap forward
    zed: "f"
    nvim: "s"             # flash.nvim

  sneak_backward:
    desc: Sneak/leap backward
    zed: "F"
    nvim: "S"

  matching:
    desc: Go to matching bracket
    zed: "w"
    nvim: "%"

  history_back:
    desc: Go back in jump history
    zed: "["
    nvim: "C-o"

  history_forward:
    desc: Go forward in jump history
    zed: "]"
    nvim: "C-i"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# CODE NAVIGATION
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

code:
  goto_definition_split:
    desc: Go to definition (split)
    zed: "q"

  goto_definition:
    desc: Go to definition (in place)
    zed: "m D"
    nvim: "gd"

  goto_type_definition_split:
    desc: Go to type definition (split)
    zed: "m t"

  goto_type_definition:
    desc: Go to type definition (in place)
    zed: "m T"

  find_references:
    desc: Find all references
    zed: "m r"
    nvim: "gr"

  diagnostic_next:
    desc: Go to next diagnostic
    zed: "m j"
    nvim: "]d"

  diagnostic_prev:
    desc: Go to previous diagnostic
    zed: "m K"
    nvim: "[d"

  hover:
    desc: Hover docs
    nvim: "gh"            # displaced from K (now half-page scroll)

  join_lines:
    desc: Join lines
    nvim: "gJ"            # displaced from J (now half-page scroll)

  code_actions:
    desc: Show code actions
    zed: "<spc> ."
    nvim: "<spc> ."

  rename:
    desc: Rename symbol
    zed: "r"
    nvim: "<spc> rn"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# EDITING
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

edit:
  undo:
    desc: Undo
    zed: "u"
    nvim: "u"

  redo:
    desc: Redo
    zed: "U"
    nvim: "U"             # remapped from C-r

  duplicate_up:
    desc: Duplicate line/selection up
    zed: "D-k"            # visual mode

  duplicate_down:
    desc: Duplicate line/selection down
    zed: "D-j"            # visual mode

  select_expand:
    desc: Expand selection to larger syntax node
    zed: "v"              # visual mode, also }

  select_shrink:
    desc: Shrink selection to smaller syntax node
    zed: "{"              # visual mode

  select_enclosing:
    desc: Select enclosing symbol
    zed: "V"

  fold_toggle:
    desc: Toggle fold
    zed: "z o"
    nvim: "za"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# SEARCH
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

search:
  buffer_replace:
    desc: Search & replace in buffer
    zed: "?"
    nvim: ":%s/"

  project:
    desc: Search in project (new tab)
    zed: "D-?"
    nvim: "?"

  next:
    desc: Go to next match (centered)
    zed: "n"
    nvim: "n"             # remapped to nzz

  prev:
    desc: Go to previous match (centered)
    zed: "N"
    nvim: "N"             # remapped to Nzz

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# GIT
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

git:
  hunk_next:
    desc: Go to next hunk
    zed: "g j"
    nvim: "]c"

  hunk_prev:
    desc: Go to previous hunk
    zed: "g k"
    nvim: "[c"

  branch:
    desc: Switch branch
    zed: "g b"

  diff:
    desc: Show diff panel
    zed: "g d"

  hunk_toggle:
    desc: Toggle hunk visibility
    zed: "g o"

  hunk_expand_all:
    desc: Expand all hunks
    zed: "g O"

  stage_toggle:
    desc: Toggle staged
    zed: "g a"

  stage_all:
    desc: Stage all
    zed: "g A"

  restore:
    desc: Restore hunk
    zed: "g u"

  restore_file:
    desc: Restore file
    zed: "g U"

  commit:
    desc: Commit
    zed: "g c"

  push:
    desc: Push
    zed: "g p"

  push_force:
    desc: Force push
    zed: "g P"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# CONFIGURATION (LEADER: ,)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

config:
  settings:
    desc: Open settings
    zed: ", ,"

  keymap:
    desc: Open keymap
    zed: ", k"

  keymap_default:
    desc: Open default keymap
    zed: ", K"

  snippets:
    desc: Configure snippets
    zed: ", s"

  tasks:
    desc: Open tasks config
    zed: ", t"

  toggle_inline_diagnostics:
    desc: Toggle inline diagnostics
    zed: ", e"

  toggle_inline_values:
    desc: Toggle inline values
    zed: ", v"

  toggle_warnings:
    desc: Toggle warnings visibility
    zed: ", w"

  toggle_soft_wrap:
    desc: Toggle soft wrap
    zed: ", <spc>"

  toggle_gitignore:
    desc: Toggle gitignore visibility
    zed: ", g"

  reload:
    desc: Reload workspace
    zed: ", R"

  restart_lsp:
    desc: Restart language server
    zed: ", r"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# TOGGLES (LEADER: <spc> t)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

toggle:
  inlay_hints:
    desc: Toggle inlay hints
    zed: "<spc> t h"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# VIEW
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

view:
  centered_layout:
    desc: Toggle centered/focus layout
    zed: "<spc> f"

  zoom:
    desc: Toggle zoom on current pane
    zed: "<spc> z"
    kitty: "C-D-z"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# AI ASSIST
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

ai:
  toggle_panel:
    desc: Toggle AI panel
    zed: "D-L"

  accept_prediction:
    desc: Accept edit prediction
    zed: "S-<cr>"

  inline_switch:
    desc: Inline assist - convert to switch
    zed: "<spc> r s"

  inline_ternary:
    desc: Inline assist - convert to ternary
    zed: "<spc> r t"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# PROJECT PANEL
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

project_panel:
  nav_prev_dir:
    desc: Select previous directory
    zed: "C-k"

  nav_next_dir:
    desc: Select next directory
    zed: "C-j"

  first:
    desc: Select first item
    zed: "K"

  last:
    desc: Select last item
    zed: "J"

  collapse_all:
    desc: Collapse all entries
    zed: "H"

  new_file:
    desc: Create new file
    zed: "n"

  new_dir:
    desc: Create new directory
    zed: "N"

  rename:
    desc: Rename item
    zed: "r"

  delete:
    desc: Delete item (trash)
    zed: "d"

  copy:
    desc: Copy item
    zed: "c"

  paste:
    desc: Paste item
    zed: "p"

  search_in_dir:
    desc: Search in directory
    zed: "/"

  open_system:
    desc: Open with system app
    zed: "D-<cr>"

  reveal_finder:
    desc: Reveal in Finder
    zed: "S-<cr>"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# GIT PANEL
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

git_panel:
  first:
    desc: Select first item
    zed: "K"

  last:
    desc: Select last item
    zed: "J"

  stage:
    desc: Stage file
    zed: "l"

  unstage:
    desc: Unstage file
    zed: "h"

  toggle_staged:
    desc: Toggle staged
    zed: "a"

  open_file:
    desc: Open file
    zed: "o"

  open_diff:
    desc: Open in diff panel
    zed: "O"

  restore:
    desc: Restore file (with prompt)
    zed: "d"

  restore_force:
    desc: Restore file (no prompt)
    zed: "D"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# TERMINAL
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

terminal:
  new:
    desc: New terminal
    zed: "D-t"

  multiline_input:
    desc: Insert newline in input
    zed: "S-<cr>"
    kitty: "S-<cr>"       # send_text \n
    cc: "S-<cr>"

  clear_screen:
    desc: Clear terminal scrollback
    kitty: "C-'"          # clear_terminal scroll active

  exit_to_editor:
    desc: Return focus to editor
    zed: "C-'"

  shell_command:
    desc: External command from nvim
    nvim: "!"             # remapped from :!
